# L0-WORKFLOW-MASTER.md

**Version**: 1.0
**Last Updated**: 2024-01-31
**Status**: Active
**Owner**: Process Owner

---

## 개요 (Overview)

이 문서는 AI-Assisted Maintenance의 **표준 워크플로우**를 정의합니다.
모든 프로젝트에서 동일하게 적용되는 5단계 프로세스입니다.

**핵심 원칙**:
1. **안전 우선**: 모든 단계에 안전 장치
2. **단계별 검증**: 다음 단계로 가기 전 반드시 확인
3. **문서화**: 모든 과정 기록
4. **AI 협업**: AI를 도구로 활용, 맹신 금지

---

## 워크플로우 개요

```
Step 0: 준비 (Preparation)
   ↓
Step 1: 복잡도 평가 (Complexity Analysis)
   ↓
   ├─→ 🟢 LOW → Step 2
   ├─→ 🟡 MEDIUM → Step 2 (+ Step 4 리뷰 필수)
   └─→ 🔴 HIGH → [개발자 요청]
   ↓
Step 2: 구현 (Implementation)
   ↓
Step 3: 테스트 (Testing)
   ↓
Step 4: 리뷰 (Review) - MEDIUM만
   ↓
Step 5: 문서화 (Documentation)
```

**예상 소요 시간**:
- 🟢 LOW: 15-30분
- 🟡 MEDIUM: 1-2시간 (리뷰 포함)
- 🔴 HIGH: 개발자 일정에 따름

---

## Step 0: 준비 (Preparation)

### 📋 목적
변경 작업을 안전하게 시작하기 위한 환경 설정

### 👤 담당자
비개발자

### 📂 사용 문서
- (참고만) L0-WORKFLOW-MASTER.md (이 문서)

### ⚙️ 사용 도구
- Git
- Terminal

### 📥 입력 (Input)
- 변경 요청 내용 (무엇을 바꾸고 싶은지)

### 🔄 작업 절차

#### 0.1 Git 백업
```bash
# 현재 상태 확인
git status

# 변경사항이 있다면 커밋
git add .
git commit -m "변경 전 백업: [YYYY-MM-DD]"

# 현재 커밋 해시 기록
git log -1 --oneline
# 출력 예: a1b2c3d 변경 전 백업: 2024-01-31
# 이 해시를 메모! (롤백 시 사용)
```

**체크포인트**:
- [ ] Git 상태가 clean인가?
- [ ] 백업 커밋 완료했는가?
- [ ] 커밋 해시를 기록했는가?

#### 0.2 가상환경 확인
```bash
# 가상환경 활성화 확인
which python
# 출력에 .venv 또는 venv가 포함되어야 함

# 필요시 활성화
source .venv/bin/activate  # macOS/Linux
# 또는
.venv\Scripts\activate  # Windows
```

**체크포인트**:
- [ ] 가상환경이 활성화되었는가?

#### 0.3 의존성 확인
```bash
# requirements.txt와 현재 설치된 패키지 비교
pip list

# 필요시 재설치
pip install -r requirements.txt
```

**체크포인트**:
- [ ] 필수 패키지가 모두 설치되었는가?

#### 0.4 변경 요청서 작성 (템플릿)
```markdown
# 변경 요청서 #{번호}

**날짜**: YYYY-MM-DD
**요청자**: [이름]
**프로젝트**: [프로젝트명]

## 변경 이유
[왜 이 변경이 필요한가?]

## 변경 내용
[무엇을 어떻게 바꾸고 싶은가?]

## 영향 범위 예상
- [ ] 1개 파일만 수정
- [ ] 2-3개 파일 수정
- [ ] 여러 파일 수정
- [ ] 모르겠음

## 긴급도
- [ ] 긴급 (프로덕션 오류)
- [ ] 이번 주 내
- [ ] 여유 있음
```

**저장 위치**: `change-requests/CR-{YYYYMMDD}-{번호}.md`

### 📤 출력 (Output)
- Git 백업 완료 (커밋 해시)
- 가상환경 활성화 확인
- 변경 요청서 작성 완료

### ✅ Gate Criteria (다음 단계로 가는 조건)
- [ ] Git 백업 완료
- [ ] 가상환경 활성화
- [ ] 변경 요청서 작성 완료
- [ ] 변경 내용이 명확함

---

## Step 1: 복잡도 평가 (Complexity Analysis)

### 📋 목적
변경 작업의 난이도를 AI와 함께 평가하여 적절한 진행 방법 결정

### 👤 담당자
비개발자 + AI

### 📂 사용 문서
**필수**:
- `@L1-CLAUDE.md`
- `@L1-COMPLEXITY-MATRIX.md`
- `@L1-CONSTRAINTS.md`

**선택**:
- `@L2-EXAMPLES.md` (유사 사례 참고)

### ⚙️ 사용 도구
- Claude (claude.ai) - 추천
- ChatGPT
- Cursor

### 📥 입력 (Input)
- Step 0에서 작성한 변경 요청서

### 🔄 작업 절차

#### 1.1 AI 프롬프트 작성 (표준 형식)

```
[STEP-1: COMPLEXITY-ANALYSIS]
[PROJECT: {프로젝트명}]
[USER: Non-Technical]
[COMPLEXITY: Unknown]

[CONTEXT FILES]
@L1-CLAUDE.md
@L1-COMPLEXITY-MATRIX.md
@L1-CONSTRAINTS.md

[BACKGROUND]
나는 비개발자이며, 이 프로젝트를 수정하려고 합니다.
아래 변경 요청의 복잡도를 평가해주세요.

[CHANGE REQUEST]
{변경 요청서 내용 전체 복사}

[REQUEST]
다음 형식으로 정확히 답변해주세요:

## 📊 복잡도 분석 결과

**분류**: 🟢 LOW / 🟡 MEDIUM / 🔴 HIGH

**판단 근거**:
[2-3문장으로 설명]

**수정 대상 파일**:
- 파일명.py (예상 라인: XX-YY)

**예상 소요 시간**:
[시간]

**위험 요소**:
[있다면 구체적으로, 없으면 "없음"]

**다음 단계 권장**:
- ✅ 비개발자 직접 진행 가능
- ⚠️ 비개발자 진행 + 개발자 리뷰 필수
- ❌ 개발자 필수

[만약 ✅ 또는 ⚠️인 경우]
**구체적 실행 계획**:
1. [단계 1]
2. [단계 2]
...

[CONSTRAINTS]
- L1-CONSTRAINTS.md에 명시된 금지 사항 확인 필수
- 불확실하면 보수적으로 판단 (HIGH 쪽으로)
- async/await 관련이면 무조건 HIGH
```

#### 1.2 AI 응답 분석

AI가 제공한 분류를 기반으로 경로 결정:

**🟢 LOW인 경우**:
- Step 2로 진행
- 개발자 리뷰 불필요
- 예상 시간: 15-30분

**🟡 MEDIUM인 경우**:
- Step 2로 진행하되, Step 4 리뷰 필수
- 예상 시간: 1-2시간 (리뷰 포함)
- 개발자에게 사전 알림 (리뷰 일정 조율)

**🔴 HIGH인 경우**:
- Step 2로 진행하지 않음
- 즉시 개발자에게 요청 전달
- L0-HANDOFF 문서 참고하여 요청서 작성

#### 1.3 의사결정 체크리스트

스스로에게 질문:

1. **AI의 판단이 확신 없어 보이는가?**
   - "아마도", "가능할 것 같다" 같은 애매한 표현
   - → 한 단계 높여서 판단 (MEDIUM → HIGH)

2. **async/await 키워드가 보이는가?**
   - → 무조건 HIGH

3. **L1-CONSTRAINTS.md의 "절대 금지" 항목에 해당하는가?**
   - → 무조건 HIGH

4. **이전에 비슷한 작업을 성공한 적이 있는가?**
   - → L2-EXAMPLES.md 확인
   - 성공 사례 있으면 신뢰도 ↑

5. **실패해도 쉽게 되돌릴 수 있는가?**
   - Git으로 즉시 rollback 가능? → 신뢰도 ↑
   - 데이터 손실 위험? → 신뢰도 ↓

### 📤 출력 (Output)

**복잡도 평가 보고서** (저장 위치: `change-requests/CR-{YYYYMMDD}-{번호}-ANALYSIS.md`)

```markdown
# 복잡도 평가 결과

**변경 요청**: CR-{YYYYMMDD}-{번호}
**평가 일시**: YYYY-MM-DD HH:MM
**평가자**: [이름]
**AI 도구**: Claude / ChatGPT

## AI 분석 결과
**분류**: 🟢 LOW / 🟡 MEDIUM / 🔴 HIGH
[AI 응답 전문 복사]

## 자체 검토
- [ ] AI 판단에 동의
- [ ] AI 판단을 수정 (이유: ...)

## 최종 결정
**복잡도**: 🟢 LOW / 🟡 MEDIUM / 🔴 HIGH
**다음 단계**: Step 2 진행 / 개발자 요청

## 근거
[최종 결정의 이유]
```

### ✅ Gate Criteria (다음 단계로 가는 조건)

**Step 2로 진행하려면**:
- [ ] 복잡도가 🟢 LOW 또는 🟡 MEDIUM
- [ ] L1-CONSTRAINTS.md 위배 없음
- [ ] 복잡도 평가 보고서 작성 완료
- [ ] MEDIUM인 경우 개발자에게 리뷰 일정 확인

**개발자 요청으로 가려면**:
- [ ] 복잡도가 🔴 HIGH
- [ ] 개발자 요청서 작성 (L0-HANDOFF 참고)

---

## Step 2: 구현 (Implementation)

### 📋 목적
AI 가이드를 받아 실제 코드 수정 수행

### 👤 담당자
비개발자 + AI

### 📂 사용 문서
**필수**:
- `@L1-CLAUDE.md`
- `@{수정할_파일.py}`

**강력 권장**:
- `@L2-EXAMPLES.md` (유사 사례 참고)
- `@L2-PROMPTS.md` (검증된 프롬프트)

**선택**:
- `@L1-COMPLEXITY-MATRIX.md`

### ⚙️ 사용 도구
- **Cursor** (코드 편집에 최적) - 추천
- Claude (상세 설명)
- ChatGPT (빠른 질문)

### 📥 입력 (Input)
- Step 1의 복잡도 평가 결과
- AI가 제시한 구체적 실행 계획

### 🔄 작업 절차

#### 2.1 단계별 구현 계획 수립

**AI 프롬프트 (표준 형식)**:

```
[STEP-2: IMPLEMENTATION-PLANNING]
[PROJECT: {프로젝트명}]
[USER: Non-Technical]
[COMPLEXITY: {Step 1 결과}]

[CONTEXT FILES]
@L1-CLAUDE.md
@L2-EXAMPLES.md
@{수정할_파일.py}

[BACKGROUND]
Step 1에서 복잡도 평가를 완료했습니다.
이제 실제 구현을 단계별로 진행하려고 합니다.

[PREVIOUS ANALYSIS]
{Step 1의 AI 응답 복사}

[REQUEST]
위 변경을 **단계별로 상세히** 안내해주세요.
한 번에 모든 단계를 진행하지 않고,
각 단계마다 제가 확인한 후 다음 단계로 넘어갑니다.

각 단계는 다음 형식으로 작성해주세요:

---
### Step 2.{N}: {단계 제목}

**목표**: [이 단계에서 무엇을 달성하는가]

**작업 내용**:
1. [구체적 작업 1]
2. [구체적 작업 2]

**Before (수정 전 코드)**:
```python
{원래 코드 - 파일명과 라인 번호 포함}
```

**After (수정 후 코드)**:
```python
{바뀐 코드}
```

**Why (이유)**:
[왜 이렇게 수정하는지 설명]

**Verification (확인 방법)**:
```bash
{이 단계가 성공했는지 확인하는 명령어}
```

**Rollback (되돌리기)**:
```bash
{실패 시 이 단계만 되돌리는 방법}
```

**Reply**: 이 단계 완료 후 "완료"라고 답하세요.
---

첫 번째 단계부터 시작해주세요.
다음 단계는 제가 "완료"라고 답한 후에 알려주세요.

[CONSTRAINTS]
- 절대 여러 단계를 한 번에 제시하지 마세요
- 각 단계는 5분 이내에 완료 가능해야 합니다
- 확인(Verification) 방법을 반드시 포함하세요
```

#### 2.2 단계별 실행

**각 단계마다**:

1. **AI 지시 읽기**
   - 목표 이해
   - Before/After 코드 확인
   - 이유(Why) 이해

2. **코드 수정**
   - 파일 열기
   - 정확한 라인 찾기
   - Before 코드가 맞는지 확인
   - After 코드로 수정
   - 저장

3. **즉시 검증**
   ```bash
   # 문법 오류 체크
   python -m py_compile {수정한_파일.py}
   ```
   - 에러 없으면 → "완료" 응답
   - 에러 있으면 → AI에게 에러 메시지 전달

4. **AI에 확인**
   - "완료"라고 답변
   - AI가 다음 단계 제시

5. **문제 발생 시**
   - Rollback 명령어 실행
   - AI에게 에러 상황 설명
   - 다시 시도 또는 복잡도 재평가

#### 2.3 전체 수정 완료 후 검증

모든 단계 완료 후:

```bash
# 1. 전체 파일 문법 체크
python -m py_compile {수정한_모든_파일.py}

# 2. Import 체크
python -c "import {모듈명}"

# 3. Git diff로 변경 사항 확인
git diff {파일명}
```

**체크포인트**:
- [ ] 모든 단계 완료
- [ ] 문법 오류 없음
- [ ] Import 에러 없음
- [ ] Git diff로 의도한 변경만 확인

### 📤 출력 (Output)

**구현 로그** (저장: `change-requests/CR-{YYYYMMDD}-{번호}-IMPLEMENTATION.md`)

```markdown
# 구현 로그

**변경 요청**: CR-{YYYYMMDD}-{번호}
**구현 일시**: YYYY-MM-DD HH:MM
**구현자**: [이름]
**AI 도구**: Cursor / Claude

## 수정 파일 목록
- 파일1.py (라인 XX-YY)
- 파일2.py (라인 ZZ-WW)

## 단계별 진행 기록

### Step 2.1: {제목}
- 시작: HH:MM
- 완료: HH:MM
- 상태: ✅ 성공 / ❌ 실패 → 재시도
- 비고: ...

### Step 2.2: {제목}
...

## 최종 변경 사항 (git diff)
```diff
{git diff 출력}
```

## 검증 결과
- [ ] 문법 체크 통과
- [ ] Import 체크 통과
- [ ] 의도한 변경만 포함 확인
```

### ✅ Gate Criteria (다음 단계로 가는 조건)

**Step 3으로 진행하려면**:
- [ ] 모든 단계 완료
- [ ] 문법 오류 없음
- [ ] Import 에러 없음
- [ ] Git diff 확인 완료
- [ ] 구현 로그 작성 완료

**문제 발생 시**:
- [ ] Rollback 실행
- [ ] Step 1로 돌아가 복잡도 재평가
- 또는
- [ ] 개발자에게 도움 요청

---

## Step 3: 테스트 (Testing)

### 📋 목적
수정한 코드가 의도대로 작동하는지, 기존 기능을 깨뜨리지 않았는지 확인

### 👤 담당자
비개발자

### 📂 사용 문서
**필수**:
- `L1-TESTING.md`

**선택**:
- `L2-EXAMPLES.md` (유사 사례의 테스트 방법 참고)

### ⚙️ 사용 도구
- Terminal (테스트 실행)
- 브라우저 (웹 기반 프로젝트)

### 📥 입력 (Input)
- Step 2에서 수정한 코드

### 🔄 작업 절차

#### 3.1 테스트 계획 수립

L1-TESTING.md 확인:
- 이 프로젝트의 표준 테스트 절차
- 최소 테스트 (빠른 검증)
- 전체 테스트 (완전 검증)

#### 3.2 최소 테스트 (5-10분)

**목적**: 빠르게 기본 동작 확인

**절차**:
```bash
# 1. 문법 검증 (이미 Step 2에서 완료)
python -m py_compile {파일명}

# 2. 최소 실행 (1개 항목으로)
# L1-TESTING.md의 "최소 테스트" 섹션 참고
{최소 테스트 명령어}

# 예: 01.smartThings
# python smartThings_main.py --account-count 1
```

**확인 사항**:
- [ ] 프로그램이 시작되는가?
- [ ] 에러 없이 완료되는가?
- [ ] 결과 파일이 생성되는가?
- [ ] 수정한 부분이 의도대로 작동하는가?

**실패 시**:
- 에러 로그 전체 저장
- Step 2로 돌아가거나
- AI에게 디버깅 요청

#### 3.3 기능 테스트

**정상 케이스**:
- [ ] 일반적인 경우 테스트
- [ ] 수정한 기능 확인

**엣지 케이스**:
- [ ] 빈 데이터
- [ ] 매우 큰 데이터
- [ ] 특수 문자 포함
- [ ] (L1-TESTING.md 참고)

**회귀 테스트**:
- [ ] 수정하지 않은 기능도 여전히 작동하는가?
- [ ] 이전과 비교하여 의도하지 않은 변경 없는가?

#### 3.4 성능 테스트

```bash
# 실행 시간 측정
time {실행 명령어}
```

**기준**:
- 이전 대비 10% 이내 차이: OK
- 10-50% 느려짐: 주의 (원인 파악)
- 50% 이상 느려짐: 문제 (재검토 필요)

#### 3.5 결과 비교

**수정 전 결과와 비교**:
```bash
# 백업한 결과 파일과 비교
diff {backup_result} {new_result}

# JSON 비교 (정렬 후)
jq -S . backup.json > backup_sorted.json
jq -S . new.json > new_sorted.json
diff backup_sorted.json new_sorted.json
```

**확인**:
- [ ] 의도한 변경만 발생했는가?
- [ ] 예상치 못한 변경은 없는가?

### 📤 출력 (Output)

**테스트 보고서** (저장: `change-requests/CR-{YYYYMMDD}-{번호}-TESTING.md`)

```markdown
# 테스트 보고서

**변경 요청**: CR-{YYYYMMDD}-{번호}
**테스트 일시**: YYYY-MM-DD HH:MM
**테스트 담당**: [이름]

## 테스트 환경
- OS: macOS / Windows / Linux
- Python: 3.11.9
- 가상환경: 활성화됨

## 테스트 결과

### 1. 최소 테스트
- 실행 명령: {명령어}
- 상태: ✅ Pass / ❌ Fail
- 소요 시간: {시간}
- 비고: ...

### 2. 기능 테스트
| 케이스 | 결과 | 비고 |
|--------|------|------|
| 정상 케이스 | ✅ | ... |
| 엣지 케이스 1 | ✅ | ... |
| 엣지 케이스 2 | ⚠️ | ... |
| 회귀 테스트 | ✅ | ... |

### 3. 성능 테스트
- 수정 전: {시간}
- 수정 후: {시간}
- 차이: +/- {퍼센트}
- 판정: ✅ 허용 범위 / ⚠️ 주의 / ❌ 문제

### 4. 결과 비교
- 의도한 변경: ✅ 확인됨
- 예상치 못한 변경: ❌ 없음 / ⚠️ 발견 (상세: ...)

## 발견된 문제
[없음 / 문제 상세]

## 최종 판정
✅ 모든 테스트 통과 - Step 4로 진행
⚠️ 일부 주의 사항 - 개발자 리뷰 권장
❌ 테스트 실패 - Step 2로 돌아가 수정 필요
```

### ✅ Gate Criteria (다음 단계로 가는 조건)

**Step 4로 진행 (MEDIUM) 또는 Step 5로 진행 (LOW)**:
- [ ] 최소 테스트 통과
- [ ] 기능 테스트 통과 (주요 케이스)
- [ ] 회귀 테스트 통과
- [ ] 성능 허용 범위 내
- [ ] 의도하지 않은 변경 없음
- [ ] 테스트 보고서 작성 완료

**문제 발생 시**:
- [ ] 테스트 실패 원인 파악
- [ ] Step 2로 돌아가 수정
- 또는
- [ ] 복잡도 재평가 (LOW → MEDIUM, MEDIUM → HIGH)

---

## Step 4: 리뷰 (Review) - 🟡 MEDIUM만 해당

### 📋 목적
개발자가 코드 품질과 안전성을 최종 검증

### 👤 담당자
개발자 (리뷰어) + 비개발자 (리뷰이)

### 📂 사용 문서
**개발자 참고**:
- `L1-CONSTRAINTS.md`
- `L1-CLAUDE.md`
- `@{수정한_파일들}`

**비개발자 제출**:
- Step 1-3의 모든 문서
- 구현 로그
- 테스트 보고서

### ⚙️ 사용 도구
- Git (diff 확인)
- 코드 리뷰 도구 (GitHub PR, GitLab MR 등)
- 또는 이메일/메신저

### 📥 입력 (Input)
- Step 1-3의 모든 산출물
- 수정된 코드

### 🔄 작업 절차

#### 4.1 비개발자: 리뷰 요청서 작성

**리뷰 요청서** (저장: `change-requests/CR-{YYYYMMDD}-{번호}-REVIEW-REQUEST.md`)

```markdown
# 코드 리뷰 요청

**변경 요청**: CR-{YYYYMMDD}-{번호}
**요청자**: [이름]
**요청 일시**: YYYY-MM-DD HH:MM
**리뷰어**: [개발자 이름]
**우선순위**: High / Medium / Low

## 변경 요청 요약
[한 줄 요약]

## 수정 내용
- 파일: {파일명}
- 라인: {라인 번호}
- 변경: [간단한 설명]

## 첨부 문서
- [ ] 복잡도 평가 결과 (ANALYSIS.md)
- [ ] 구현 로그 (IMPLEMENTATION.md)
- [ ] 테스트 보고서 (TESTING.md)

## Git Diff
```diff
{git diff 출력}
```

## 질문/우려사항
[있다면 명시]

## 테스트 결과
- 최소 테스트: ✅
- 기능 테스트: ✅
- 회귀 테스트: ✅
- 성능 테스트: ✅

## 리뷰 요청 사항
- [ ] 코드 품질 확인
- [ ] 예상치 못한 부작용 확인
- [ ] 개선 제안
- [ ] 배포 승인
```

#### 4.2 개발자: 코드 리뷰 수행

**체크리스트**:

**1. 안전성 (Safety)**
- [ ] L1-CONSTRAINTS.md 위배 없는가?
- [ ] async/await 잘못 사용하지 않았는가?
- [ ] 보안 위험 없는가? (하드코딩, 민감정보)

**2. 정확성 (Correctness)**
- [ ] 의도한 동작이 올바른가?
- [ ] 에러 처리가 적절한가?
- [ ] 엣지 케이스 고려했는가?

**3. 품질 (Quality)**
- [ ] 코드 가독성이 좋은가?
- [ ] 불필요한 중복 없는가?
- [ ] 주석이 적절한가?

**4. 영향 (Impact)**
- [ ] 다른 기능에 영향 없는가?
- [ ] 성능 저하 없는가?
- [ ] 확장성 고려했는가?

**5. 테스트 (Testing)**
- [ ] 테스트가 충분한가?
- [ ] 테스트가 올바른가?

#### 4.3 개발자: 리뷰 결과 작성

**리뷰 결과** (저장: `change-requests/CR-{YYYYMMDD}-{번호}-REVIEW-RESULT.md`)

```markdown
# 코드 리뷰 결과

**리뷰어**: [개발자 이름]
**리뷰 일시**: YYYY-MM-DD HH:MM
**변경 요청**: CR-{YYYYMMDD}-{번호}

## 종합 의견
✅ 승인 (배포 가능)
⚠️ 조건부 승인 (수정 후 재검토 불필요)
❌ 반려 (수정 후 재검토 필요)

## 상세 리뷰

### 안전성
✅ / ⚠️ / ❌
[의견]

### 정확성
✅ / ⚠️ / ❌
[의견]

### 품질
✅ / ⚠️ / ❌
[의견]

### 영향
✅ / ⚠️ / ❌
[의견]

### 테스트
✅ / ⚠️ / ❌
[의견]

## 필수 수정 사항
[없음 / 수정 사항 목록]

## 권장 개선 사항
[선택적 개선 제안]

## 배운 점 / 다음에 주의할 점
[비개발자를 위한 피드백]
```

#### 4.4 비개발자: 피드백 반영

**승인인 경우**:
- Step 5로 진행

**조건부 승인인 경우**:
- 권장 사항 반영 (선택)
- Step 5로 진행

**반려인 경우**:
- 필수 수정 사항 반영
- Step 2로 돌아가 재작업
- 재작업 후 Step 3-4 반복

### 📤 출력 (Output)
- 리뷰 요청서
- 리뷰 결과서
- (필요시) 수정된 코드

### ✅ Gate Criteria (다음 단계로 가는 조건)

**Step 5로 진행하려면**:
- [ ] 개발자 리뷰 완료
- [ ] "승인" 또는 "조건부 승인"
- [ ] 필수 수정 사항 모두 반영 (있었다면)

---

## Step 5: 문서화 (Documentation)

### 📋 목적
이번 작업을 기록하여 팀의 지식 자산으로 만들기

### 👤 담당자
비개발자

### 📂 사용 문서
**업데이트할 문서**:
- `L2-EXAMPLES.md` (필수)
- `L2-PROMPTS.md` (좋은 프롬프트를 발견했다면)
- `L1-COMPLEXITY-MATRIX.md` (난이도 판단 기준 수정이 필요하다면)

### ⚙️ 사용 도구
- 텍스트 에디터
- Git

### 📥 입력 (Input)
- Step 1-4의 모든 문서
- 실제 경험과 배운 점

### 🔄 작업 절차

#### 5.1 L2-EXAMPLES.md에 사례 추가

**템플릿** (L2-EXAMPLES.md에 추가):

```markdown
---

## 사례 {N}: {간단한 제목}
**날짜**: YYYY-MM-DD
**수정자**: [이름]
**프로젝트**: {프로젝트명}
**난이도**: 🟢 LOW / 🟡 MEDIUM
**성공 여부**: ✅ 성공 / ❌ 실패
**소요 시간**: {실제 걸린 시간}

### 문제 상황
[왜 수정이 필요했는지]

### 해결 방법
[어떻게 해결했는지]

### 수정 파일 및 라인
- `파일명.py`: line XX-YY

### 수정 전 코드
```python
{원래 코드}
```

### 수정 후 코드
```python
{바뀐 코드}
```

### AI 프롬프트
```
[Step 1에서 사용한 프롬프트]
```

### AI 도구
[Cursor / Claude / ChatGPT]

### 테스트 방법
[어떻게 검증했는지]

### 배운 점 / 주의사항
[다음에 참고할 내용]

### 개발자 리뷰 (MEDIUM인 경우)
- 리뷰어: [이름]
- 피드백: [요약]

---
```

#### 5.2 통계 업데이트

L2-EXAMPLES.md 하단의 통계 섹션 업데이트:

```markdown
## 📊 통계 (YYYY년 MM월)

- 총 시도: {N}건
- 성공: {N}건 ({성공률}%)
- 실패 후 수정 성공: {N}건
- 완전 실패 (개발자 의뢰): {N}건

### 난이도별
- 🟢 LOW: {N}건 ({성공률}% 성공)
- 🟡 MEDIUM: {N}건 ({성공률}% 성공, 리뷰 후 모두 통과)

### 평균 소요 시간
- 🟢 LOW: {평균}분
- 🟡 MEDIUM: {평균}시간 (리뷰 포함)
```

#### 5.3 프롬프트 추가 (선택)

좋은 프롬프트를 발견했다면 L2-PROMPTS.md에 추가:

```markdown
## {카테고리}: {프롬프트 제목}

**추가 날짜**: YYYY-MM-DD
**추가자**: [이름]
**효과**: [왜 좋은 프롬프트인지]

### 프롬프트
```
{실제 프롬프트}
```

### 사용 예시
[언제 사용하면 좋은지]

### 결과
[이 프롬프트로 얻은 결과]
```

#### 5.4 Git Commit

```bash
# 변경 사항 확인
git status

# 코드 + 문서 함께 커밋
git add {수정한_파일들}
git add L2-EXAMPLES.md
git add change-requests/CR-{YYYYMMDD}-{번호}-*.md
git commit -m "[L2] 사례 추가: {간단한 제목}

- 변경: {변경 내용 요약}
- 난이도: {LOW/MEDIUM}
- 테스트: 통과
- 리뷰: {승인/해당없음}

CR-{YYYYMMDD}-{번호}"
```

#### 5.5 change-requests 폴더 정리

```bash
# 완료된 요청은 completed 폴더로 이동
mkdir -p change-requests/completed
mv change-requests/CR-{YYYYMMDD}-{번호}-*.md change-requests/completed/
```

### 📤 출력 (Output)
- L2-EXAMPLES.md 업데이트됨
- (선택) L2-PROMPTS.md 업데이트됨
- Git commit 완료
- change-requests 정리 완료

### ✅ Gate Criteria (완료 조건)

**프로세스 완료 조건**:
- [ ] L2-EXAMPLES.md에 사례 추가
- [ ] 통계 업데이트
- [ ] Git commit 완료
- [ ] change-requests 폴더 정리
- [ ] (MEDIUM인 경우) 개발자에게 완료 보고

---

## 긴급 상황 대응 (Emergency Response)

### 🚨 프로덕션 오류 발생 시

**즉시 실행** (3분 이내):
```bash
# 1. 마지막 작동 커밋으로 롤백
git log --oneline  # 마지막 작동 커밋 찾기
git reset --hard {커밋_해시}

# 2. 프로그램 재시작
{실행 명령어}
```

**개발자에게 긴급 연락**:
```
제목: [긴급] 프로덕션 오류 - {프로젝트명}

1. 발생 시간: YYYY-MM-DD HH:MM
2. 에러: {에러 메시지 또는 증상}
3. 최근 변경: CR-{YYYYMMDD}-{번호}
4. 조치: Rollback 완료, {커밋_해시}로 복구
5. 현재 상태: {정상/여전히 오류}
```

**사후 처리**:
- 사고 보고서 작성
- 원인 분석
- 재발 방지 대책
- L1-CONSTRAINTS.md 업데이트 (필요시)

---

## 프로세스 개선

### 월간 회고 (Monthly Retrospective)

**일정**: 매월 마지막 금요일
**참석**: 비개발자 + 개발자
**시간**: 1시간

**Agenda**:
1. **통계 리뷰** (15분)
   - 이번 달 작업 건수
   - 성공률
   - 평균 소요 시간
   - 트렌드 분석

2. **사례 공유** (20분)
   - 잘된 사례 3개
   - 어려웠던 사례 2개
   - 배운 점

3. **문서 개선** (15분)
   - L1-COMPLEXITY-MATRIX 조정 필요한가?
   - L1-CONSTRAINTS 추가할 것은?
   - L2-PROMPTS에 추가할 프롬프트는?

4. **다음 달 목표** (10분)
   - 시도해볼 새로운 유형
   - 개선하고 싶은 프로세스

**산출물**:
- 회고 기록 (meeting-notes/YYYY-MM-retrospective.md)
- 문서 업데이트 목록
- 다음 달 액션 아이템

---

## References

### 관련 L0 문서
- L0-DOCUMENT-INDEX.md: 모든 문서 인덱스
- L0-HANDOFF-CHECKLIST.md: 개발자 인수인계

### 관련 L1 문서
- L1-CLAUDE.md: 프로젝트 Context
- L1-COMPLEXITY-MATRIX.md: 복잡도 기준
- L1-CONSTRAINTS.md: 제약사항
- L1-TESTING.md: 테스트 절차

### 관련 L2 문서
- L2-EXAMPLES.md: 사례집
- L2-PROMPTS.md: 프롬프트 모음

---

## Changelog

### v1.0 (2024-01-31)
- 초기 버전 작성
- 5단계 프로세스 정의
- 각 단계별 입출력, Gate Criteria 명시
- 긴급 상황 대응 절차 추가
- 월간 회고 프로세스 추가
